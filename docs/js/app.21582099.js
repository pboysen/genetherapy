(function(e){function t(t){for(var i,a,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(i=!1)}i&&(n.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},r={app:0},n=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/genetherapy/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"098f":function(e,t,s){},"0a53":function(e,t,s){},"0bc7":function(e,t,s){"use strict";s("be2c")},"0f3c":function(e,t,s){"use strict";s("0a53")},"124b":function(e,t,s){"use strict";s("bd91")},"185c":function(e,t,s){"use strict";s("e800")},"18ab":function(e,t,s){"use strict";s("fd70")},1941:function(e,t,s){"use strict";s("e42c")},"21a2":function(e,t,s){"use strict";s("c1af")},"21a3":function(e,t,s){"use strict";s("b143")},"2d16":function(e,t,s){"use strict";s("9c63")},"3b1b":function(e,t,s){"use strict";s("7179")},"3efc":function(e,t,s){},"41db":function(e,t,s){"use strict";s("d070")},"444c":function(e,t,s){},5315:function(e,t,s){"use strict";s("e588")},"54a4":function(e,t,s){"use strict";s("098f")},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i,r,n,a=s("2b0e"),o=s("2f62"),c=s("5530"),l=(s("159b"),s("caad"),s("2532"),s("07ac"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"textfield-widget",wid:e.wid}},[s("input",{class:["textfield-widget",{student:e.isStudent}],attrs:{type:"text",size:e.textSize,readonly:e.widgetIsLocked},domProps:{value:e.value},on:{input:function(t){return e.saveAnswer(t)}}})])}),u=[],d=(s("a9e3"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isActive?s("div",{class:["widget",{student:e.isRole("student")},{incomplete:e.incomplete},{subwidget:e.isSubWidget}]},[e._t("default"),s("span",{directives:[{name:"show",rawName:"v-show",value:e.optional,expression:"optional"}],staticClass:"optional"},[e._v("*optional")])],2):e._e()}),p=[],h={name:"widget-wrapper",props:{wid:Number},data:function(){return{active:!0,dragging:!1,widgetLayer:null}},mounted:function(){this.$el.setAttribute("wid",this.wid)},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","widgets","phase","widgets"])),{},{isActive:function(){return this.active},isSelected:function(){return this.widgets==this.wid},optional:function(){if(this.wid&&this.wid in this.widgets){var e={wid:this.wid,phase:this.phase,type:this.widgets[this.wid].type,prop:"optional"};return this.$store.getters.getPropValue(e)}return!1},isSubWidget:function(){return!1},incomplete:function(){return this.$store.getters.incomplete(this.wid)}}),methods:{isRole:function(e){return this.role===e},startDrag:function(e){this.active&&this.isRole("designer")&&(e.stopPropagation(),this.dragging=!0,this.$store.commit("setwidgets",this.wid),this.$store.commit("setDrawerEvent",{wid:this.wid,type:this.$store.getters.widgets[this.wid].type,top:e.pageY-120}))},stopDrag:function(e){if(this.active&&this.isRole("designer")){if(e.stopPropagation(),this.dragging=!1,window.onmousemove=null,this.isSubWidget)return;var t=this.$el.getBoundingClientRect();this.$store.commit("setWidgetRect",t)}},copyDelete:function(e){if(this.active&&this.isRole("designer")&&!this.isSubWidget){var t=this.$store.getters.widgets[this.wid].type;this.widgetLayer=e.target.parentElement;var s=this.$el.getBoundingClientRect(),i=s.left+window.scrollX+this.$el.offsetWidth,r=s.top+window.scrollY;e.pageY<r+16&&e.pageY>r&&(e.pageX>i-32&&e.pageX<i-16?this.$store.commit("copyWidget",{wid:this.wid,phase:this.$store.getters.phase,layer:this.widgetLayer,type:t,left:e.pageX+10,top:e.pageY-70}):e.pageX>i-16&&e.pageX<i&&(this.$store.commit("deleteWidget",this.wid),this.active=!1))}}}},g=h,w=(s("e1d9"),s("2877")),f=Object(w["a"])(g,d,p,!1,null,"092a9295",null),m=f.exports,v={name:"textfield-widget",props:{wid:Number},components:{widgetWrapper:m},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),{},{value:function(){return this.$store.getters["responses/getAnswer"](this.wid)},textSize:function(){var e={wid:this.wid,phase:this.phase,type:"textfield-widget",prop:"textSize"};return this.$store.getters.getPropValue(e)},isStudent:function(){return"student"===this.role}}),methods:{saveAnswer:function(e){this.$store.commit("responses/saveAnswer",{wid:this.wid,value:e.target.value})}}},b=v,y=(s("124b"),Object(w["a"])(b,l,u,!1,null,null,null)),x=y.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"textarea-widget",wid:e.wid}},[s("textarea",{class:["textarea-widget",{student:e.isStudent}],attrs:{readonly:e.widgetIsLocked},domProps:{value:e.textAreaValue},on:{input:function(t){return e.saveAnswer(t)}}})])},j=[],S={name:"textarea-widget",props:{wid:Number},components:{widgetWrapper:m},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),{},{textAreaValue:function(){var e=this.$store.getters["responses/getAnswer"](this.wid);if(""!=e)return e;var t={wid:this.wid,phase:this.phase,type:"textarea-widget",prop:"sources"},s=this.$store.getters.getPropValue(t);return s.length>0?this.$store.getters["responses/textAnswers"](s):""},isStudent:function(){return"student"===this.role}}),methods:{saveAnswer:function(e){this.$store.commit("responses/saveAnswer",{wid:this.wid,value:e.target.value})}}},_=S,$=(s("3b1b"),Object(w["a"])(_,O,j,!1,null,null,null)),k=$.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"select-widget",wid:e.wid}},[s("select",{staticClass:"select",attrs:{size:e.selectSize},on:{change:function(t){return e.saveAnswer(t)}}},e._l(e.options,(function(t){return s("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)])},T=[],W=(s("ac1f"),s("1276"),{name:"select-widget",props:{wid:Number},components:{widgetWrapper:m},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["role","phase"])),{},{options:function(){var e={wid:this.wid,phase:this.phase,type:"select-widget",prop:"selectOptions"},t=this.$store.getters.getPropValue(e);return t?t.split(","):""},selectSize:function(){var e={wid:this.wid,phase:this.phase,type:"select-widget",prop:"selectSize"};return this.$store.getters.getPropValue(e)}}),methods:{saveAnswer:function(e){this.$store.commit("responses/saveAnswer",{wid:this.wid,value:e.target.value})}}}),P=W,I=(s("5315"),Object(w["a"])(P,A,T,!1,null,null,null)),D=I.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"carry-forward",wid:e.wid}},[s("div",{class:["carry-forward",{student:"student"==e.role}]},e._l(e.htmlAnswers,(function(t){return s("div",{key:t.id,domProps:{innerHTML:e._s(t.answer)}})})),0)])},C=[],L={name:"carry-forward",props:{wid:Number},components:{widgetWrapper:m},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["role","phase"])),{},{htmlAnswers:function(){var e=this,t=[],s={wid:this.wid,phase:this.phase,type:"carry-forward",prop:"sources"},i=this.$store.getters.getPropValue(s);return Object.values(i).forEach((function(s){var i=e.$store.getters["responses/getAnswer"](s.wid),r=e.$store.getters.phaseWidget(s);i="image-answer"===r.type?'<img src="'.concat(i,'" />'):"<p>".concat(i,"</p>"),t.push({id:s.wid,answer:i})})),t}})},N=L,R=(s("b358"),Object(w["a"])(N,E,C,!1,null,null,null)),V=R.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"media-widget",wid:e.wid}},[s("div",[s("iframe",{staticClass:"iframe",attrs:{src:e.src}})])])},M=[],z={name:"media-widget",props:{wid:Number},components:{widgetWrapper:m},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["role","phase"])),{},{src:function(){return this.$store.getters.getPropValue({wid:this.wid,phase:this.phase,type:"media-widget",prop:"mediaSrc"})}})},F=z,X=(s("54a4"),Object(w["a"])(F,B,M,!1,null,null,null)),H=X.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"check-list"}},[s("div",{staticClass:"check-list"},e._l(e.checks,(function(t){return s("div",{key:t.key},[t.value>0?s("input",{attrs:{name:"cl"+e.wid+"."+t.value,type:"checkbox"},domProps:{value:t.value}}):e._e()])})),0)])},U=[],Y={name:"check-list",props:{wid:Number},components:{widgetWrapper:m},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),{},{checks:function(){var e={wid:this.wid,phase:this.phase,type:"check-list",prop:"checks"};return this.$store.getters.getPropValue(e)},pixelRatio:function(){return window.devicePixelRatio}})},q=Y,K=(s("ec02"),Object(w["a"])(q,J,U,!1,null,null,null)),G=K.exports,Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"multiple-choice",wid:e.wid}},[s("div",{staticClass:"multiple-choice"},e._l(e.radios,(function(t){return s("div",{key:t.key},[t.value>0?s("input",{attrs:{type:"radio",name:"mc"+e.wid},domProps:{value:t.value}}):e._e()])})),0)])},Z=[],ee={name:"multiple-choice",props:{wid:Number},components:{widgetWrapper:m},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),{},{radios:function(){var e={wid:this.wid,phase:this.phase,type:"multiple-choice",prop:"radios"};return this.$store.getters.getPropValue(e)}})},te=ee,se=(s("b56a"),Object(w["a"])(te,Q,Z,!1,null,"30e1fef4",null)),ie=se.exports,re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"image-widget",wid:e.wid}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.dropped||"designer"===e.role,expression:"!dropped || role === 'designer'"}],class:["drop_zone",{student:"student"===e.role}],attrs:{id:"drop_zone"},on:{drop:function(t){return t.stopPropagation(),t.preventDefault(),e.dropHandler(t)},dragover:function(e){e.preventDefault()}}},[s("p",[e._v("Drop your Photo or Image answer here.")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.dropped&&"student"===e.role,expression:"dropped && role === 'student'"}],attrs:{id:"showImg"},on:{click:function(t){return e.handleMenu(t)}}},[s("img",{attrs:{id:"answerImage",src:""}})])])},ne=[],ae={name:"image-widget",props:{wid:Number},data:function(){return{dropped:!1}},components:{widgetWrapper:m},computed:Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),methods:{dropHandler:function(e){if("student"==this.role){var t=[];if(e.dataTransfer.items)for(var s=0;s<e.dataTransfer.items.length;s++)"file"===e.dataTransfer.items[s].kind&&t.push(e.dataTransfer.items[s].getAsFile());if(1!=t.length)return"Please drop only one file.";var i=t[0];return/^image\//i.test(i.type)?(this.saveImage(i),""):"Only Images or Photos are permitted."}},saveImage:function(e){var t=this,s=new FileReader;s.onload=function(){return t.processFile(s.result,e.type)},s.readAsArrayBuffer(e)},handleMenu:function(e){var t=this.$el.getBoundingClientRect(),s=t.left+window.scrollX+this.$el.offsetWidth,i=t.top+window.scrollY;e.pageY>i&&e.pageY<i+16&&(e.pageX>s-32&&e.pageX<s-16?this.rotateImage():e.pageX>s-16&&e.pageX<s&&this.removeImage())},rotateImage:function(){var e=document.getElementById("answerImage"),t=this.$store.getters["responses/getAnswer"](this.wid),s=document.createElement("canvas"),i=[this.$el.offsetWidth,this.$el.offsetHeight],r=i[0],n=i[1];s.width=r,s.height=n;var a=s.getContext("2d");a.save(),a.translate(r/2,n/2),a.rotate(90*Math.PI/180),a.drawImage(e,-r/2,-n/2),e.src=s.toDataURL(t.type),a.restore(),this.$store.commit("responses/saveAnswer",{wid:this.wid,value:e.src,type:t.type})},removeImage:function(){var e=document.getElementById("answerImage");e.src="",this.$store.commit("responses/saveAnswer",{wid:this.wid,value:"",type:""}),this.dropped=!1},processFile:function(e,t){var s=new Image;s.src=e;var i=this;s.onload=function(){var e=[s.width,s.height],r=e[0],n=e[1],a=document.createElement("canvas"),o=i.$el.offsetWidth,c=n*(o/r);a.width=o,a.height=c;var l=a.getContext("2d");l.drawImage(s,0,0,o,c);var u=document.getElementById("answerImage");u.src=a.toDataURL(t),i.dropped=!0,i.$store.commit("responses/saveAnswer",{wid:i.wid,value:u.src,type:t})}}}},oe=ae,ce=(s("0f3c"),Object(w["a"])(oe,re,ne,!1,null,"66411539",null)),le=ce.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"table-widget",wid:e.wid}},[null!=e.table?s("table",[s("thead",[s("tr",e._l(e.table[0],(function(t,i){return s("th",{key:i},[e._v(" "+e._s(t)+" ")])})),0)]),s("tbody",e._l(e.table.slice(1),(function(t,i){return s("tr",{key:i},e._l(t,(function(t,r){return s("td",{key:r,attrs:{colspan:e.col(i,r,t)}},[e.isWidget(t)?s(e.subType(t),{tag:"component",attrs:{wid:e.subId(t)}}):s("span",[e._v(e._s(t))])],1)})),0)})),0)]):e._e(),null==e.table?s("div",{attrs:{id:"table-widget-file"}},[s("upload-button",{attrs:{title:e.title,accept:e.accept,multiple:e.multiple},on:{"upload-files":e.uploadCSV}})],1):e._e()])},de=[],pe=(s("2ca0"),s("99af"),s("a434"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("label",{attrs:{for:"file_upload"}},[e._v(e._s(e.title))]),s("input",{attrs:{id:"file_upload",type:"file",accept:e.acceptTypes},on:{change:function(t){return e.uploadFile(t)}}})])}),he=[],ge={name:"upload-button",props:{title:String,accept:Array,multiple:Boolean},computed:{acceptTypes:function(){var e="";return this.accept.forEach((function(t){return e+=t+","})),e}},methods:{uploadFile:function(e){for(var t=e.target.files,s=[],i=0;i<t.length;i++)this.validFileType(t[i])&&s.push(t[i]);s.length>0&&this.$emit("upload-files",s)},validFileType:function(e){return this.accept.includes(e.type)}}},we=ge,fe=(s("0bc7"),Object(w["a"])(we,pe,he,!1,null,"2383a4d8",null)),me=fe.exports,ve=(s("498a"),{methods:{parse:function(e){var t={};return e.substring(1).split(";").forEach((function(e){var s=e.trim().split("=");t[s[0]]=s[1].trim()})),t}}}),be=s("4d7c"),ye="~",xe={name:"table-widget",mixins:[ve],props:{wid:Number},data:function(){return{table:null,colspans:null,title:"Upload a CSV file",accept:["text/csv"],multiple:!1}},components:{widgetWrapper:m,textfieldWidget:x,selectWidget:D,uploadButton:me},computed:Object(c["a"])({},Object(o["b"])(["role","phase"])),methods:{getProp:function(e){this.$store.getters.getPropValue({id:this.wid,phase:this.phase,type:"table-widget",value:e})},isWidget:function(e){return String(e).startsWith(ye)},subType:function(e){return e.split(ye)[1]},subId:function(e){return Number(e.split(ye)[2])},col:function(e,t){return this.colspans["".concat(e,",").concat(t)]},registerColspans:function(e){this.colspans={};for(var t=1;t<e.length;t++){var s=0,i=0;while(s<e[t].length){var r=s+1;while(""===e[t][r]&&r<e[t].length)r++;i=r-s,i>1&&e[t].splice(s+1,i-1),this.colspans["".concat(t-1,",").concat(s)]=i,s++}}},registerWidgets:function(e){for(var t=0;t<e.length;t++)for(var s=0;s<e[t].length;s++)if(String(e[t][s]).startsWith(ye)){var i=this.parse(e[t][s]),r=i["type"],n={wid:null,type:r,wrec:null,props:i};this.$store.commit("registerSubWidget",n),e[t][s]="".concat(ye).concat(r).concat(ye).concat(n.wid)}},uploadCSV:function(e){var t=new FileReader,s=this;t.onload=function(){be({noheader:!0,output:"csv"}).fromString(t.result).then((function(e){s.registerColspans(e),s.registerWidgets(e);var t={wid:s.wid,prop:"table",value:e};s.table=e,s.$store.commit("setProp",t)}))},t.readAsText(e[0])}}},Oe=xe,je=(s("7bad"),Object(w["a"])(Oe,ue,de,!1,null,"25424b9e",null)),Se=je.exports,_e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"upload-widget",wid:e.wid}},[s("upload-button",{attrs:{title:e.title,accept:e.accept,multiple:e.multiple}})],1)},$e=[],ke={name:"upload-widget",props:{wid:Number},data:function(){return{title:"Upload your File",accept:["text/csv"],multiple:!1}},components:{widgetWrapper:m,uploadButton:me},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["role","phase"])),{},{isDesigner:function(){return"designer"===this.role},isStudent:function(){return"designer"===this.role}})},Ae=ke,Te=(s("21a2"),Object(w["a"])(Ae,_e,$e,!1,null,null,null)),We=Te.exports,Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"pc-draw-arrow",wid:e.wid}},[s("div",{attrs:{id:"colors"}},[s("span",[e._v("Arrow Color:")]),e._l(e.colors,(function(t){return s("span",{key:t.id},[s("input",{attrs:{id:t.id,type:"radio",name:"color",checked:"checked"},domProps:{value:t.name},on:{click:function(s){return e.setColor(t.name)}}}),s("label",{style:{color:t.name},attrs:{for:t.id}},[e._v(" "+e._s(t.name)+" ")])])}))],2),s("canvas",{attrs:{id:"arrow-canvas",width:"800",height:"600"}}),s("pc-download-image",{attrs:{title:"Download Image",url:e.image}})],1)},Ie=[],De=(s("4057"),s("6569")),Ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"dnldiv"}},[s("a",{attrs:{id:"download",href:"assets/remove.png",download:"image.png"},on:{click:e.download}},[s("button",{attrs:{type:"button"}},[e._v(e._s(e.title))])])])},Ce=[],Le=(s("5319"),{props:{title:String,stage:Object},methods:{download:function(){var e=document.getElementById("download"),t=this.stage.canvas.toDataURL("image/png");t=t.replace(/^data:image\/[^;]*/,"data:application/octet-stream"),t=t.replace(/^data:application\/octet-stream/,"data:application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=image.png"),e.href=t}}}),Ne=Le,Re=(s("8752"),Object(w["a"])(Ne,Ee,Ce,!1,null,"e3feee7a",null)),Ve=Re.exports;s("d3b7"),s("25f0");function Be(e,t){r=e,i=new De["Stage"](t),i.enableMouseOver(),i.cursor="default",De["Touch"].enable(i),e.stage=i,n=new De["Bitmap"](e.image),n.image.onload=function(){return Xe(i.canvas,n)},i.addChild(n),He()}function Me(){i.on("stagemousedown",(function(e){return r.mouseDown(e)})),i.on("stagemousemove",(function(e){return r.mouseMove(e)})),i.on("stagemouseup",(function(e){return r.mouseUp(e)}))}function ze(){i.enableMouseOver(0),i.on("stagemousedown",r.mouseDown),i.on("stagemousemove",r.mouseMove),i.on("stagemouseup",r.mouseUp)}function Fe(){return n}function Xe(e,t){e.style=null;var s=t.getBounds(),i=[s.width,s.height];e.width=i[0],e.height=i[1];var r=[s.width/2,s.height/2];t.x=r[0],t.y=r[1];var n=[s.width/2,s.height/2];t.regX=n[0],t.regY=n[1]}function He(){De["Ticker"].on("tick",(function(){i.update()}))}function Je(e,t,s,i){return 180*Math.atan2(i-t,s-e)/Math.PI}var Ue=void 0,Ye={props:{wid:Number},data:function(){return{stage:null,shape:null,arrow:null,color:"blue",down:!1}},components:{widgetWrapper:m,PcDownloadImage:Ve},mounted:function(){var e=this;this.$nextTick((function(){Be(e,"arrow-canvas"),e.showArrows()}))},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),{},{getColor:function(){return Ue.color},image:function(){return this.prop("image")},lineWidth:function(){return this.prop("lineWidth")},value:function(){return this.$store.getters["responses/getAnswer"](this.wid)},colors:function(){var e=this.prop("colors"),t=[],s=1;return e.split(",").forEach((function(e){t.push({id:"c"+s++,name:e})})),t}}),watch:{role:function(e){"student"===e?Me():ze()}},methods:{prop:function(e){return this.$store.getters.getPropValue({wid:this.wid,phase:this.phase,type:"pc-draw-arrow",prop:e})},showArrows:function(){for(var e in this.value.arrows)this.arrow=this.value.arrows[e],this.showArrow(e),this.setCursor()},setColor:function(e){this.color=e},setCursor:function(){this.widgetIsLocked||(this.shape.cursor="url(assets/img/remove.png) 8 8, auto")},showArrow:function(e){var t=this,s=this.arrow,i=new De["Shape"];i.color=s.color;var r=Math.min(this.lineWidth,5),n=Math.hypot(s.sx-s.ex,s.sy-s.ey),a=s.color;i.graphics.ss(1).s(a).f(a).mt(0,0).lt(0,r).lt(n,r).lt(n,2*r).lt(n+2*r,0).lt(n,-2*r).lt(n,-r).lt(0,-r).lt(0,0);var o=[s.sx,s.sy,Je(s.sx,s.sy,s.ex,s.ey)];i.x=o[0],i.y=o[1],i.rotation=o[2],this.shape=i,this.stage.addChild(i),this.widgetIsLocked||i.on("click",(function(s){s.stopPropagation(),t.stage.removeChild(i),t.deleteArrow(e)}))},saveArrow:function(){this.value.arrows[this.value.id++]=this.arrow,this.$store.commit("responses/saveAnswer",this.value)},deleteArrow:function(e){delete this.value.arrows[e],this.$store.commit("responses/saveAnswer",this.value)},mouseDown:function(e){var t=this.stage.getObjectUnderPoint(e.stageX,e.stageY);(!t||t&&t.image)&&(this.arrow={sx:e.stageX,sy:e.stageY,ex:e.stageX,ey:e.stageY,color:this.color},this.showArrow(this.value.id),this.down=!0)},mouseMove:function(e){if(this.down){this.stage.removeChild(this.shape);var t=[e.stageX,e.stageY];this.arrow.ex=t[0],this.arrow.ey=t[1],this.showArrow(this.value.id)}},mouseUp:function(){this.down&&(this.saveArrow(),this.setCursor(),this.down=!1)},testData:function(){return{id:3,arrows:{1:{sx:0,sy:50,ex:100,ey:50,color:"red"},2:{sx:0,sy:100,ex:100,ey:100,color:"blue"}}}}}},qe=Ye,Ke=(s("21a3"),Object(w["a"])(qe,Pe,Ie,!1,null,"3a9d5222",null)),Ge=Ke.exports,Qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"pc-draw-rotate",wid:e.wid}},[s("div",{attrs:{id:"ratators"}},[s("button",{on:{click:e.saveRotate}},[e._v("Rotate")]),s("button",{on:{click:e.saveHorizontal}},[e._v("Flip Horizontally")]),s("button",{on:{click:e.saveVertical}},[e._v("Flip Vertically")])]),s("canvas",{attrs:{id:"rotate-canvas",width:"800",height:"600"}}),s("pc-download-image",{attrs:{title:"Download Image",url:e.image}})],1)},Ze=[],et={props:{wid:Number},data:function(){return{stage:null}},components:{widgetWrapper:m,PcDownloadImage:Ve},mounted:function(){var e=this;this.$nextTick((function(){Be(e,"rotate-canvas"),e.showImage()}))},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),{},{value:function(){return this.$store.getters["responses/getAnswer"](this.wid)},image:function(){return this.prop("image")}}),methods:{prop:function(e){return this.$store.getters.getPropValue({wid:this.wid,phase:this.phase,type:"pc-draw-rotate",prop:e})},showImage:function(){var e=Fe();e.rotation=this.value.rotation,e.scaleX=this.value.flipH,e.scaleY=this.value.flipV},saveValue:function(e){this.$store.commit("responses/saveAnswer",e),this.showImage()},saveRotate:function(){var e=this.value.rotation;this.value.rotation=e<360?e+90:0,this.saveValue(this.value)},saveHorizontal:function(){this.value.flipH=-this.value.flipH,this.saveValue(this.value)},saveVertical:function(){this.value.flipV=-this.value.flipV,this.saveValue(this.value)}}},tt=et,st=(s("2d16"),Object(w["a"])(tt,Qe,Ze,!1,null,"a93279ae",null)),it=st.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"pc-draw-label",wid:e.wid}},[s("label",{attrs:{for:"labeltext"}},[e._v("Label:"),s("br")]),s("textarea",{attrs:{id:"labeltext",placeholder:"Label Text",onblur:e.updateLabel,cols:"20",rows:"1"},on:{input:function(t){return e.input(t)}}}),s("br"),s("canvas",{attrs:{id:"label-canvas",width:"800",height:"600"}}),s("pc-download-image",{attrs:{title:"Download Image",stage:e.stage}})],1)},nt=[],at={props:{wid:Number},data:function(){return{stage:null,id:null,editor:null,labels:{}}},components:{widgetWrapper:m,PcDownloadImage:Ve},mounted:function(){var e=this;this.$nextTick((function(){Be(e,"label-canvas"),e.showLabels(),e.editor=document.getElementById("labeltext")}))},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),{},{value:function(){return this.$store.getters["responses/getAnswer"](this.wid)},image:function(){return this.prop("image")}}),watch:{role:function(){var e=this;"student"===this.role?Fe().on("click",(function(t){var s=e.addLabel({text:"",x:t.stageX,y:t.stageY});e.showLabel(s),e.edit(s)})):this.stage.removeEventListener("click")}},methods:{prop:function(e){return this.$store.getters.getPropValue({wid:this.wid,phase:this.phase,type:"pc-draw-label",prop:e})},showLabels:function(){for(var e in this.value.labels)this.label=this.value.labels[e],this.showLabel(e),this.setCursor()},showLabel:function(e){var t=this,s=2,i=this.value.labels[e],r=new De["Text"](i.text,"14px Arial","#000");r.x=i.x+s,r.y=i.y+s;var n=Math.max(r.getMeasuredWidth()+2*s,20),a=new De["Shape"];a.graphics.beginFill("white"),a.graphics.drawRoundRect(i.x,i.y,n,r.getMeasuredHeight()+2*s,5),a.graphics.endFill();var o=new De["Bitmap"]("assets/img/remove.png");o.x=i.x+n-8,o.y=i.y-10,o.visible=!1;var c=new De["Container"];c.on("mouseover",(function(){o.visible=!0})),c.on("mouseout",(function(){o.visible=!1})),o.on("click",(function(){t.stage.removeChild(c),delete t.labels[e],t.deleteLabel(e),t.editor.value="",t.editor.blur()})),c.addChild(a),c.addChild(r),c.addChild(o),this.stage.addChild(c),this.labels[e]=c,c.on("click",(function(s){s.stopPropagation(),t.edit(e)}))},edit:function(e){this.id=e,this.label=this.value.labels[e],this.editor.value=this.label.text,this.editor.focus()},input:function(e){e.stopPropagation(),this.label.text=this.editor.value,this.stage.removeChild(this.labels[this.id]),this.showLabel(this.id),this.updateLabel()},deleteLabel:function(e){delete this.value.labels[e],this.$store.commit("responses/saveAnswer",this.value)},updateLabel:function(){this.value.labels[this.id]=this.label,this.$store.commit("responses/saveAnswer",this.value)},addLabel:function(e){var t=this.value.id;return this.value.labels[this.value.id++]=e,this.$store.commit("responses/saveAnswer",this.value),t}}},ot=at,ct=(s("185c"),Object(w["a"])(ot,rt,nt,!1,null,"de8ac076",null)),lt=ct.exports,ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"pc-draw-shape",wid:e.wid}},[s("canvas",{attrs:{id:"shape-canvas",width:"800",height:"600"}}),s("pc-download-image",{attrs:{title:"Download Image",url:e.image}})],1)},dt=[],pt={props:{wid:Number},data:function(){return{stage:null,id:null}},components:{widgetWrapper:m,PcDownloadImage:Ve},mounted:function(){var e=this;this.$nextTick((function(){Be(e,"shape-canvas"),e.showShapes()}))},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["widgetIsLocked","role","phase"])),{},{value:function(){return this.$store.getters["responses/getAnswer"](this.wid)},image:function(){return this.prop("image")},shape:function(){return this.prop("shape")},width:function(){return this.prop("width")},height:function(){return this.prop("height")},color:function(){return this.prop("color")},opacity:function(){return this.prop("opacity")}}),watch:{role:function(){var e=this;"student"===this.role?Fe().on("click",(function(t){t.stopPropagation();var s=e.addShape(t);e.showShape(s)})):this.stage.removeEventListener("click")}},methods:{prop:function(e){return this.$store.getters.getPropValue({wid:this.wid,phase:this.phase,type:"pc-draw-shape",prop:e})},createShape:function(e){var t=new De["Shape"];switch(t.alpha=e.o,t.graphics.beginFill(e.c),e.s){case"rectangle":t.graphics.drawRect(e.x,e.y,e.w,e.h);break;case"circle":t.graphics.drawEllipse(e.x,e.y,e.w,e.h);break}return t.graphics.endFill(),t},showShapes:function(){for(var e in this.value.shapes)this.label=this.value.shapes[e],this.showShape(e),this.setCursor()},showShape:function(e){var t=this;this.value.shapes[e];var s=this.createShape(this.value.shapes[e]);s.cursor="url(assets/img/remove.png) 8 8, auto",this.widgetIsLocked||s.on("click",(function(i){i.stopPropagation(),t.stage.removeChild(s),t.deleteShape(e)})),this.stage.addChild(s)},deleteShape:function(e){delete this.value.shapes[e],this.$store.commit("responses/saveAnswer",this.value)},addShape:function(e){var t={x:e.stageX,y:e.stageY,s:this.shape,w:this.width,h:this.height,c:this.color,o:this.opacity},s=this.value.id;return this.value.shapes[this.value.id++]=t,this.$store.commit("responses/saveAnswer",this.value),s}}},ht=pt,gt=(s("c9ab"),Object(w["a"])(ht,ut,dt,!1,null,"c9c5e300",null)),wt=gt.exports,ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("widget-wrapper",{attrs:{widgettype:"equation-widget",wid:e.wid}},[s("div",{domProps:{innerHTML:e._s(e.result)}})])},mt=[];s("490a");var vt={name:"equation-widget",props:{wid:Number},components:{widgetWrapper:m},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["role","phase","widgets"])),{},{result:function(){var e=this.widgets[this.wid];return"mml"===e.format?window.MathJax.mathml2chtml(e.formula).outerHTML:"tex"===e.format?window.MathJax.tex2chtml(e.formula).outerHTML:"Unrecognized format: ".concat(e.format)}})},bt=vt,yt=(s("9997"),Object(w["a"])(bt,ft,mt,!1,null,null,null)),xt=yt.exports;a["a"].use(o["a"]);var Ot={"textfield-widget":a["a"].extend(x),"textarea-widget":a["a"].extend(k),"select-widget":a["a"].extend(D),"carry-forward":a["a"].extend(V),"media-widget":a["a"].extend(H),"check-list":a["a"].extend(G),"multiple-choice":a["a"].extend(ie),"image-widget":a["a"].extend(le),"table-widget":a["a"].extend(Se),"upload-widget":a["a"].extend(We),"pc-draw-arrow":a["a"].extend(Ge),"pc-draw-rotate":a["a"].extend(it),"pc-draw-label":a["a"].extend(lt),"pc-draw-shape":a["a"].extend(wt),"equation-widget":a["a"].extend(xt)},jt=function(){return{widgets:{"textfield-widget":{type:"textfield-widget",src:"textfield-widget.png",isSource:!0,isTarget:!0,isDraggable:!0,textSizes:["5","10","20","40"],defaultAnswer:"",prototype:{type:"textfield-widget",id:null,rect:null,subWidget:!1,props:{sources:[],textSize:20,optional:!1,textOptions:"",textAnswer:""}}},"textarea-widget":{type:"textarea-widget",src:"textarea-widget.png",isSource:!0,isTarget:!0,isDraggable:!0,defaultAnswer:"",prototype:{type:"textarea-widget",id:null,rect:null,subWidget:!1,props:{sources:[],optional:!1}}},"select-widget":{type:"select-widget",src:"select-widget.png",isSource:!0,isTarget:!1,isDraggable:!0,defaultAnswer:"",prototype:{type:"select-widget",id:null,rect:null,subWidget:!1,props:{selectOptions:"",correct:"",selectSize:"1",multiple:!1,optional:!1}}},"carry-forward":{type:"carry-forward",src:"cforward.png",isSource:!1,isTarget:!0,isDraggable:!0,defaultAnswer:"",prototype:{type:"carry-forward",id:null,rect:null,subWidget:!1,props:{sources:[],optional:!1}}},"media-widget":{type:"media-widget",src:"media-widget.png",isSource:!1,isTarget:!1,isDraggable:!0,defaultAnswer:"",prototype:{type:"media-widget",id:null,rect:null,subWidget:!1,props:{mediaSrc:"",optional:!1}}},"multiple-choice":{type:"multiple-choice",src:"multiple-choice.png",isSource:!0,isTarget:!1,isDraggable:!1,defaultAnswer:"",prototype:{type:"multiple-choice",id:null,rect:null,subWidget:!1,props:{radios:[],optional:!1}}},"check-list":{type:"check-list",src:"check-list.png",isSource:!0,isTarget:!1,isDraggable:!1,defaultAnswer:"",prototype:{type:"check-list",id:null,rect:null,subWidget:!1,props:{checks:[],optional:!1}}},"image-widget":{type:"image-widget",src:"image-widget.png",isSource:!0,isTarget:!1,isDraggable:!0,defaultAnswer:"",prototype:{type:"image-widget",id:null,rect:null,subWidget:!1,props:{optional:!1}}},"table-widget":{type:"table-widget",src:"table-widget.png",isSource:!1,isTarget:!1,isDraggable:!0,defaultAnswer:"",prototype:{type:"table-widget",id:null,rect:null,subWidget:!1,props:{table:null,colspans:null,optional:!1}}},"upload-widget":{type:"upload-widget",src:"upload-widget.png",isSource:!1,isTarget:!1,isDraggable:!0,defaultAnswer:"",prototype:{type:"upload-widget",id:null,rect:null,subWidget:!1,props:{title:"Upload",optional:!1,accept:[],multiple:!1}}},"pc-draw-arrow":{type:"pc-draw-arrow",src:"pc-draw-arrow.png",isSource:!0,isTarget:!1,isDraggable:!0,defaultAnswer:{id:1,arrows:{}},prototype:{type:"pc-draw-arrow",id:null,rect:null,subWidget:!1,props:{colors:"red,blue",image:"assets/img/heart diagram.png",lineWidth:5}}},"pc-draw-rotate":{type:"pc-draw-rotate",src:"pc-draw-rotate.png",isSource:!1,isTarget:!1,isDraggable:!0,defaultAnswer:{rotation:0,flipH:1,flipV:1},prototype:{type:"pc-draw-rotate",id:null,rect:null,subWidget:!1,props:{image:"assets/img/heart diagram.png"}}},"pc-draw-label":{type:"pc-draw-label",src:"pc-draw-label.png",isSource:!1,isTarget:!1,isDraggable:!0,defaultAnswer:{id:1,labels:{}},prototype:{type:"pc-draw-label",id:null,rect:null,subWidget:!1,props:{image:"assets/img/heart diagram.png"}}},"pc-draw-shape":{type:"pc-draw-shape",src:"pc-draw-shape.png",isSource:!1,isTarget:!1,isDraggable:!0,defaultAnswer:{id:1,shapes:{}},prototype:{type:"pc-draw-shape",id:null,rect:null,subWidget:!1,props:{shape:"rectangle",width:50,height:50,color:"green",opacity:1,image:"assets/img/heart diagram.png"}}},"equation-widget":{type:"equation-widget",src:"equation-widget.png",isSource:!1,isTarget:!1,isDraggable:!1,prototype:{type:"equation-widget",id:null,rect:null,subWidget:!1,props:{format:"mml",formula:""}}}},tools:{"observations-tool":{title:"Observations",userRole:"student",prototype:{id:null,phase:null,text:""}},"comments-tool":{title:"Comments",userRole:"student",prototype:{id:null,phase:null,text:"",date:null,sel:null}},"resources-tool":{title:"Resources",userRole:"student",prototype:{id:null,phase:null,url:"",title:""}},scores:{useRole:"instructor"}}}},St={namespaced:!0,state:jt(),getters:{widgets:function(e){return e.widgets},getTools:function(e){return e.tools},textSizes:function(e){return e.widgets["textfield-widget"].textSizes}},mutations:{setState:function(e,t){Object.assign(e,t)},makeWidget:function(e,t){var s=new Ot[t.type]({propsData:{wid:t.wid},store:t.store});s.$mount();var i=t.el.parentElement;i.insertBefore(s.$el,t.el),i.removeChild(t.el)},makeSubWidget:function(e,t){var s=t.store,i=new Ot[t.type]({propsData:{wid:t.wid},store:s});i.$mount(),t.layer.appendChild(i.$el)}},actions:{setDefaultState:function(e){Object.assign(e,jt())},getToolRecord:function(e,t){var s=e.state.tools[t].prototype;return JSON.parse(JSON.stringify(s))}}},_t=St;a["a"].use(o["a"]);var $t=function(){return{caseid:"weather",activePhase:0,answers:{}}},kt={namespaced:!0,state:$t(),getters:{getAnswer:function(e,t,s,i){return function(t){if(t in e.answers)return e.answers[t];var s=i["widgetType"](t);return s?i["factory/widgets"][s].defaultAnswer:""}},hasAnswer:function(e){return function(t){return t in e.answers}},activePhase:function(e){return e.activePhase},textAnswers:function(e){return function(t){var s="";return Object.values(t).forEach((function(t){t in e.answers&&(s+=e.answers[t]+"\n")})),s}}},mutations:{saveAnswer:function(e,t){a["a"].set(e.answers,t.wid,t.value)},unlockNextPhase:function(e){e.activePhase++},resetState:function(e,t){Object.assign(e,t)}},actions:{setDefaultState:function(e){Object.assign(e,$t())}}},At=kt,Tt=void 0;a["a"].use(o["a"]);var Wt=function(){return{fileName:"",wcnt:1,tcnt:1,role:"designer",phase:-1,widget:null,caseKey:0,drawerEvent:{type:"",top:50},tool:"",incomplete:[],phases:[],widgets:{},tools:{},fileTypes:["image/*","application/pdf","application/case","text/csv"],selectedWidgetTypes:["textfield-widget","textarea-widget","select-widget","carry-forward","media-widget","image-widget","table-widget","upload-widget"],selectedToolTypes:["observations-tool","comments-tool"]}},Pt=new o["a"].Store({modules:{factory:_t,responses:At},state:Wt(),getters:{case:function(e){return e},caseKey:function(e){return e.caseKey},role:function(e){return e.role},phase:function(e){return e.phase},currentPhase:function(e){return e.phases[e.phase]},phaseTitle:function(e){return e.phase>=0?Pt.getters.currentPhase.title:""},phases:function(e){return e.phases},phaseTitles:function(e){var t=[];return e.phases.forEach((function(e){return t.push(e.title)})),t},widget:function(e){return e.widget},fileTypes:function(e){return e.fileTypes},fileName:function(e){return e.fileName},widgets:function(e){return e.widgets},activePhase:function(){return Pt.getters["responses/activePhase"]},activeSubmit:function(e){return"student"===e.role&&e.phase>=0&&e.phase==Pt.getters.activePhase},submitTitle:function(e){return e.phase>=0?Pt.getters.currentPhase.submit:"Submit"},selectedWidgetTypes:function(e){return e.selectedWidgetTypes},phaseWidget:function(e){return function(t){return e.phases[t.phase].widgets[t.wid]}},widgetType:function(e){return function(t){var s=null;return e.phases.forEach((function(e){t in e.components&&(s=e.components[t].type)})),s}},locked:function(e){return function(t){return"student"===e.role&&t>Tt.activePhase}},incomplete:function(e){return function(t){return e.incomplete.includes(t)}},getPropValue:function(e){return function(t){var s=e.phases[t.phase].components;if(t.wid in s&&t.type===s[t.wid].type)return s[t.wid].props[t.prop];var i=Pt.getters["factory/widgets"][t.type];return i.prototype.props[t.prop]}},noListWidgets:function(){var e=[];return Pt.getters.selectedWidgets.forEach((function(t){"multiple-choice"!=t.type&&"check-list"!=t.type&&e.push(t)})),e},possibleSources:function(e){for(var t=[],s=function(s){Object.values(e.phases[s].widgets).forEach((function(e){Pt.getters["factory/widgets"][e.type].isSource&&t.push({wid:e.id,phase:s,type:e.type})}))},i=0;i<e.phase;i++)s(i);return t},selectedWidgets:function(e){var t=[];return e.selectedWidgetTypes.forEach((function(e){t.push(Pt.getters["factory/widgets"][e])})),t},widgetIsLocked:function(e){return"student"===e.role&&e.phase<Pt.getters["responses/activePhase"]},copyState:function(e){return Pt.dispatch("responses/setDefaultState"),JSON.stringify(e)}},mutations:{setState:function(e,t){Object.assign(e,t)},setDoc:function(e,t){Pt.dispatch("setDefaultState"),e.fileName=t.fileName,e.phases=t.phases,Pt.commit("setphase",0),e.caseKey++},setphase:function(e,t){e.phase=t,e.widget=null},setrole:function(e,t){e.role=t},setwidget:function(e,t){e.widget=t},setSubmitTitle:function(e,t){e.phases[e.phase].submit=t},setProp:function(e,t){e.phases[e.phase].widgets[t.wid].props[t.prop]=t.value},setProps:function(e,t,s){Pt.getters.widgets[t]=s},setSelectedWidgetTypes:function(e,t){e.selectedWidgetTypes=t},setSelectedToolTypes:function(e,t){e.selectedToolTypes=t},validateResponses:function(e){return e.incomplete=[],Object.values(Pt.getters.widgets).forEach((function(t){t.phase!=e.phase||t.optional||Pt.getters["responses/hasAnswer"](t.id)||e.incomplete.push(t.id)})),0==e.incomplete.length},addComponents:function(e,t){var s=e.phases[t].components;for(var i in s){var r=s[i],n=document.getElementById(i);n&&(Pt.commit("setphase",t),Pt.commit("addComponent",{el:n,type:r}))}Pt.commit("setphase",0)},addComponent:function(e,t){var s=e.wcnt++,i=Pt.getters["factory/widgets"][t.type].prototype,r=JSON.parse(JSON.stringify(i));r.id=s,"equation-widget"===t.type&&(r.format="mml",r.formula=t.el.outerHTML),a["a"].set(e.widgets,s,r),Pt.commit("factory/makeWidget",{type:t.type,el:t.el,wid:s,store:Pt})},copyWidget:function(e,t){t.wrec=It(Pt.getters.widgets[t.wid]),Pt.commit("addNewWidget",t)},deleteWidget:function(e,t){Pt.commit("setwidget",null),delete Pt.getters.widgets[t]},registerSubWidget:function(e,t){var s=e.wcnt++,i=Pt.getters["factory/widgets"][t.type].prototype;t.wrec=JSON.parse(JSON.stringify(i)),t.wrec.props=Object(c["a"])(Object(c["a"])({},t.wrec.props),t.props),t.wid=s,t.wrec.id=s,t.wrec.subWidget=!0,a["a"].set(Pt.getters.widgets,s,t.wrec)},addObservation:function(e,t){Pt.dispatch("factory/getToolRecord","observations-tool").then((function(s){s.id=e.tcnt++,s.text=t,s.phase=e.phase,e.tools["observations-tool"].push(s)}))},installTool:function(e,t){e.tools[t.tool]||a["a"].set(e.tools,t.tool,JSON.parse(JSON.stringify(t.value)))}},actions:{setDefaultState:function(e){Pt.dispatch("responses/setDefaultState"),Pt.dispatch("factory/setDefaultState"),Object.assign(e,Wt())},restartStudent:function(){Pt.dispatch("responses/setDefaultState"),Pt.commit("setphase",0),Pt.commit("setwidget",null)},submit:function(){Pt.state.incomplete=[],Object.values(Pt.getters.widgets).forEach((function(e){e.phase!=Pt.state.phase||e.optional||Pt.getters["responses/hasAnswer"](e.id)||Pt.state.incomplete.push(e.id)})),0==Pt.state.incomplete.length&&(Pt.commit("responses/unlockNextPhase"),Pt.commit("setphase",++Pt.state.phase))}}});function It(e){return JSON.parse(JSON.stringify(e))}var Dt=Pt,Et=s("8c4f");a["a"].use(Et["a"]);var Ct=[],Lt=new Et["a"]({routes:Ct}),Nt=Lt,Rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("main-bar"),s("case-viewer")],1)},Vt=[],Bt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"casebar"}},[s("role-selector"),s("div",{attrs:{id:"main-title"}},[e._v("Allele Designer")]),s("case-filer")],1)},Mt=[],zt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"roles"}},[s("input",{attrs:{id:"designer",type:"radio"},domProps:{checked:e.isDesigner},on:{change:function(t){return e.setRole("designer")}}}),s("label",{attrs:{for:"designer"}},[e._v("Designer")]),s("input",{attrs:{id:"student",type:"radio"},domProps:{checked:!e.isDesigner},on:{change:function(t){return e.setRole("student")}}}),s("label",{attrs:{for:"student"}},[e._v("Student")])])},Ft=[],Xt={name:"role-selector",computed:{isDesigner:function(){return"designer"===this.$store.getters.role}},methods:{setRole:function(e){"newstudent"===e?(this.$store.dispatch("restartStudent"),document.getElementById("role").value="student"):this.$store.commit("setrole",e)}}},Ht=Xt,Jt=(s("41db"),Object(w["a"])(Ht,zt,Ft,!1,null,"685e343e",null)),Ut=Jt.exports,Yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"files"}},[s("button",{on:{click:e.importIt}},[e._v("Import")]),s("button",{on:{click:e.publishIt}},[e._v("Publish")])])},qt=[],Kt=(s("c19f"),s("ace4"),s("3ca3"),s("ddb0"),s("2b3d"),{name:"case-filer",methods:{importIt:function(){var e=window.open("upload-file.html","_blank","left=100,top=100,width=400,height=400"),t=this;window.onstorage=function(){window.onstorage=null;var s=localStorage.getItem("allele");s&&t.$store.commit("setDoc",JSON.parse(s)),e.close()}},publishIt:function(){var e=document.getElementById("publishFile"),t=this.publish(e.value),s=document.getElementById("puberror");""===t?s.style.display="none":(s.innerHTML=t,s.style.display="block")},publish:function(e){var t=this;if(!this.currentFile)return"Import a file first.";if(""===e)return"Enter a file name.";this.$store.commit("setphase",-1);var s=this.$store.getters.copyState;return this.getFileBlob(this.currentFile,(function(t){var i=new ArrayBuffer(4),r=new DataView(i);r.setUint32(0,s.length);var n=URL.createObjectURL(new Blob([i,s,t],{type:"application/case"})),a=document.createElement("a");a.href=n,a.download=e+".case",a.click(),URL.revokeObjectURL(a.href)})),this.$nextTick((function(){return t.$store.commit("setphase",0)})),""}}}),Gt=Kt,Qt=(s("18ab"),Object(w["a"])(Gt,Yt,qt,!1,null,"63c0c177",null)),Zt=Qt.exports,es={name:"main-bar",components:{roleSelector:Ut,caseFiler:Zt},computed:{isDesigner:function(){return"designer"===this.$store.getters.role}}},ts=es,ss=(s("c1c6"),Object(w["a"])(ts,Bt,Mt,!1,null,"f4a8fe48",null)),is=ss.exports,rs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{key:e.caseKey,attrs:{id:"case-viewer"}},[s("phase-bar"),e._l(e.phases,(function(e){return s("phase-viewer",{key:e.id,attrs:{pobj:e}})})),s("submit-bar")],2)},ns=[],as=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"phase-bar"}},[s("zoom-component",{staticClass:"zoom"}),s("div",{staticClass:"phase-top"},[s("div",{staticClass:"phase-title"},[e._v(e._s(e.phaseTitle))])]),s("br"),e._v(" Phases: "),s("div",{staticClass:"buttons"},e._l(e.phases,(function(t,i){return s("button",{key:i,class:e.buttonClass(t.id),attrs:{id:t.id,disabled:e.isTodo(t.id)},on:{click:function(s){return e.setphase(t.id)}}})})),0)],1)},os=[],cs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"zoom-component"},[s("a",{on:{click:e.join}},[e._v("Join Meeting")])])},ls=[],us={methods:{join:function(){var e=window.open("https://zoom.us/j/95821380731?pwd=NWsrdEdGK2NkQStYejBBcnUrTlRrdz09","_blank","resizeable,left=700,top=500,width=300,height:300");setTimeout((function(){return e.close()}),5e3)}}},ds=us,ps=(s("649c"),Object(w["a"])(ds,cs,ls,!1,null,"0671a15d",null)),hs=ps.exports,gs={name:"phase-bar",components:{zoomComponent:hs},computed:Object(c["a"])({},Object(o["b"])(["phases","phase","role","phaseTitle","activePhase"])),methods:{buttonClass:function(e){var t=this.phase,s="phase-button";return"designer"==this.role?s+=e==t?" active":" design":e==t?s+=" active":e<this.activePhase?s+=" done":e==this.activePhase?s+=" design":s+=" todo",s},isTodo:function(e){return"student"===this.role&&e>this.activePhase},setphase:function(e){this.$store.commit("setphase",e)}}},ws=gs,fs=(s("e1cb"),Object(w["a"])(ws,as,os,!1,null,"4eb7fdd0",null)),ms=fs.exports,vs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.phase==e.pobj.id,expression:"phase == pobj.id"}],staticClass:"phase"},[s("div",{domProps:{innerHTML:e._s(e.pobj.content)}})])},bs=[],ys={name:"phase-viewer",props:{pobj:Object},computed:Object(c["a"])({},Object(o["b"])(["phase"])),mounted:function(){this.$store.commit("addComponents",this.pobj.id)},methods:{textSelect:function(){var e=window.getSelection();this.$root.$emit("textSelected",e)},highlight:function(){}}},xs=ys,Os=(s("6949"),Object(w["a"])(xs,vs,bs,!1,null,null,null)),js=Os.exports,Ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.activeSubmit,expression:"activeSubmit"}],attrs:{id:"submit-panel"}},[s("button",{on:{click:e.submit}},[e._v(" "+e._s(e.submitTitle)+" ")])])},_s=[],$s={name:"submit-bar",computed:Object(c["a"])({},Object(o["b"])(["submitTitle","phase","role","activePhase","activeSubmit"])),methods:{submit:function(){this.$store.dispatch("submit"),window.scrollTo(0,0)}}},ks=$s,As=(s("1941"),Object(w["a"])(ks,Ss,_s,!1,null,"034f788e",null)),Ts=As.exports,Ws={name:"case-viewer",components:{phaseBar:ms,phaseViewer:js,submitBar:Ts},computed:Object(c["a"])(Object(c["a"])({},Object(o["b"])(["role","phase","phases","caseKey"])),{},{showSubmit:function(){return"student"===this.role}})},Ps=Ws,Is=(s("5a4f"),Object(w["a"])(Ps,rs,ns,!1,null,"044c42fc",null)),Ds=Is.exports,Es={name:"App",components:{mainBar:is,caseViewer:Ds}},Cs=Es,Ls=(s("5c0b"),Object(w["a"])(Cs,Rt,Vt,!1,null,null,null)),Ns=Ls.exports;a["a"].config.productionTip=!0,a["a"].config.devtools=!1,a["a"].use(o["a"]),window.addEventListener("error",(function(e){e.preventDefault()}));var Rs=new a["a"];t["default"]=Rs;new a["a"]({store:Dt,router:Nt,render:function(e){return e(Ns)}}).$mount("#app");var Vs=localStorage.getItem("allele");Vs=Vs?JSON.parse(Vs):{fileName:"Allele Case.docx",phases:[{title:"Formatting Word for Allele",id:0,components:{},content:'<h3>Getting Started</h3>\n        Allele Case is used to import Word content into the Allele Designer. The instructions\n        below show a case on how to prepare a word document.\n        <ol>\n          <li>Download <a href="Allele Case.docx">Instructions to format Word for Allele</a></li>\n          <li><b>Import</b> Above</li>\n          <li>Drop Allele Case.docx in the dropbox that appears</li>\n        </ol>\n        <p>Follow the instructions in the case to get started.</p>'}]},Dt.commit("setDoc",Vs)},"5a4f":function(e,t,s){"use strict";s("d67c")},"5c0b":function(e,t,s){"use strict";s("6605")},6268:function(e,t,s){},"649c":function(e,t,s){"use strict";s("b07e")},6599:function(e,t,s){},6605:function(e,t,s){},6949:function(e,t,s){"use strict";s("6268")},7179:function(e,t,s){},"7bad":function(e,t,s){"use strict";s("8eda")},8752:function(e,t,s){"use strict";s("444c")},"8eda":function(e,t,s){},"8fdc":function(e,t,s){},"93ae":function(e,t,s){},9997:function(e,t,s){"use strict";s("3efc")},"9c63":function(e,t,s){},a6aa:function(e,t,s){},b07e:function(e,t,s){},b143:function(e,t,s){},b358:function(e,t,s){"use strict";s("6599")},b56a:function(e,t,s){"use strict";s("dd68")},bd91:function(e,t,s){},be2c:function(e,t,s){},c1af:function(e,t,s){},c1c6:function(e,t,s){"use strict";s("a6aa")},c9ab:function(e,t,s){"use strict";s("f1d2")},d070:function(e,t,s){},d67c:function(e,t,s){},db2e:function(e,t,s){},dd68:function(e,t,s){},e1cb:function(e,t,s){"use strict";s("93ae")},e1d9:function(e,t,s){"use strict";s("8fdc")},e42c:function(e,t,s){},e588:function(e,t,s){},e800:function(e,t,s){},ec02:function(e,t,s){"use strict";s("db2e")},f1d2:function(e,t,s){},fd70:function(e,t,s){}});
//# sourceMappingURL=app.21582099.js.map